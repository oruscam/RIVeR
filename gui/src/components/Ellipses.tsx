import { Group, Ellipse as KonvaEllipse } from "react-konva";
import { useMatrixSlice } from "../hooks";
import { COLORS } from "../constants/constants";


const uncertainly_ellipses = [
    {
        "center": [
            809.6875,
            516.1875
        ],
        "width": 4.330419148555559,
        "height": 47.147854261369744,
        "angle": -51.76579272449897
    },
    {
        "center": [
            791.375,
            581.625
        ],
        "width": 7.394810645599324,
        "height": 43.43641491135022,
        "angle": -47.19799367334175
    },
    {
        "center": [
            1077.125,
            706.375
        ],
        "width": 16.743188734649234,
        "height": 38.446337956826596,
        "angle": 138.2978682291948
    },
    {
        "center": [
            1229.875,
            556.125
        ],
        "width": 20.080334662588452,
        "height": 30.050565346369847,
        "angle": -76.30032620442068
    },
    {
        "center": [
            1437.625,
            729.375
        ],
        "width": 6.928894195747641,
        "height": 29.19481504675157,
        "angle": -93.4332986461561
    },
    {
        "center": [
            1856.375,
            574.125
        ],
        "width": 5.21207411551651,
        "height": 61.59941947824572,
        "angle": -87.45053222914206
    },
    {
        "center": [
            2060.8125,
            635.8125
        ],
        "width": 7.999880146810347,
        "height": 71.79261349590973,
        "angle": -91.23432869216565
    },
    {
        "center": [
            2208.125,
            702.375
        ],
        "width": 8.359550337748077,
        "height": 80.5794322592542,
        "angle": -92.64196519197164
    },
    {
        "center": [
            1822.875,
            779.625
        ],
        "width": 13.832315077913579,
        "height": 79.8174377844454,
        "angle": -95.60675211045779
    },
    {
        "center": [
            1649.125,
            656.125
        ],
        "width": 27.919937143045505,
        "height": 79.54172206087752,
        "angle": -95.84333398335382
    },
    {
        "center": [
            923.125,
            593.625
        ],
        "width": 16.319675715445285,
        "height": 49.1853181276617,
        "angle": -120.62742528000179
    },
    {
        "center": [
            1056.875,
            427.375
        ],
        "width": 21.893587647270582,
        "height": 43.03701261822395,
        "angle": -114.84255977366496
    },
    {
        "center": [
            1285.9375,
            362.0625
        ],
        "width": 21.240801321363918,
        "height": 44.26632643737362,
        "angle": -121.97945562277273
    },
    {
        "center": [
            1229.375,
            529.375
        ],
        "width": 22.941699073902363,
        "height": 45.4383804017142,
        "angle": -115.96602799487638
    },
    {
        "center": [
            1566.375,
            499.125
        ],
        "width": 8.316307842403775,
        "height": 45.3727879481935,
        "angle": -97.5694187311403
    },
    {
        "center": [
            1856.625,
            539.125
        ],
        "width": 19.52438077928412,
        "height": 53.65826941970767,
        "angle": -113.51364197115312
    },
    {
        "center": [
            1799.375,
            480.125
        ],
        "width": 7.451818962364207,
        "height": 54.11839634404748,
        "angle": -123.75229185325108
    },
    {
        "center": [
            2029.625,
            393.625
        ],
        "width": 8.985926790019807,
        "height": 53.69386751171698,
        "angle": -123.4323931303749
    },
    {
        "center": [
            2103.125,
            491.625
        ],
        "width": 27.318421967213236,
        "height": 132.0623330386818,
        "angle": -96.32495495500801
    },
    {
        "center": [
            2290.625,
            579.375
        ],
        "width": 30.499473952332167,
        "height": 152.35242936978605,
        "angle": -99.73490410447316
    },
    {
        "center": [
            2495.875,
            585.875
        ],
        "width": 56.67095130435526,
        "height": 192.3231101174467,
        "angle": -83.77772469519968
    },
    {
        "center": [
            2390.125,
            1244.375
        ],
        "width": 84.82155960018535,
        "height": 192.16359740997393,
        "angle": -82.72151497460962
    },
    {
        "center": [
            2019.625,
            1255.625
        ],
        "width": 81.35603294306911,
        "height": 213.86593026313935,
        "angle": -86.58379736519159
    },
    {
        "center": [
            1452.125,
            1239.625
        ],
        "width": 83.50121608726691,
        "height": 160.9843293062685,
        "angle": -98.06193852539424
    },
    {
        "center": [
            985.125,
            1252.875
        ],
        "width": 63.30531296449271,
        "height": 171.42250400869597,
        "angle": -77.49316101749693
    },
    {
        "center": [
            1508.125,
            1382.625
        ],
        "width": 103.10682834297666,
        "height": 110.68272716426252,
        "angle": -105.14920561624935
    },
    {
        "center": [
            644.125,
            1141.375
        ],
        "width": 79.85190598418053,
        "height": 111.34932722616948,
        "angle": -118.75404462023073
    },
    {
        "center": [
            475.375,
            1046.375
        ],
        "width": 77.62491456258442,
        "height": 90.56207379469296,
        "angle": -139.29324154140028
    },
    {
        "center": [
            1277.125,
            1083.375
        ],
        "width": 28.18312342833459,
        "height": 89.10303544430738,
        "angle": -112.41778717897274
    },
    {
        "center": [
            1557.625,
            952.375
        ],
        "width": 69.39004908497205,
        "height": 79.16479662873655,
        "angle": -155.83275957765895
    },
    {
        "center": [
            1955.625,
            978.375
        ],
        "width": 39.440953225039706,
        "height": 77.29860539167282,
        "angle": 174.27430904919234
    },
    {
        "center": [
            2251.75,
            1453.75
        ],
        "width": 13.942780281826234,
        "height": 77.53340523063459,
        "angle": 150.96580322710972
    },
    {
        "center": [
            2065.375,
            1089.125
        ],
        "width": 27.43731289982576,
        "height": 78.8999272572737,
        "angle": 156.74601559782766
    },
    {
        "center": [
            1743.875,
            970.875
        ],
        "width": 51.53620083750151,
        "height": 78.724094030628,
        "angle": 165.41178211775437
    },
    {
        "center": [
            1442.875,
            1022.125
        ],
        "width": 37.083251799200966,
        "height": 52.07554217977396,
        "angle": -93.19867584240916
    },
    {
        "center": [
            1028.125,
            882.375
        ],
        "width": 17.959595545103564,
        "height": 52.09821307942037,
        "angle": -92.41501369413226
    },
    {
        "center": [
            700.875,
            840.625
        ],
        "width": 18.723847437110035,
        "height": 94.8233030466224,
        "angle": -101.95038412612858
    },
    {
        "center": [
            588.5625,
            1016.6875
        ],
        "width": 30.92999591603615,
        "height": 91.8485438986607,
        "angle": -101.3956346291449
    },
    {
        "center": [
            591.25,
            1467.25
        ],
        "width": 40.740666845380865,
        "height": 259.9506674258767,
        "angle": -118.3954002424865
    },
    {
        "center": [
            441.875,
            1336.625
        ],
        "width": 29.702539753239936,
        "height": 263.33915327140846,
        "angle": -118.40969672243212
    },
    {
        "center": [
            173.875,
            1288.125
        ],
        "width": 34.414863477604264,
        "height": 267.6606320123907,
        "angle": -119.256079712477
    },
    {
        "center": [
            372.875,
            777.875
        ],
        "width": 67.51440270406893,
        "height": 243.2172064337084,
        "angle": -123.111196863716
    },
    {
        "center": [
            521.125,
            563.375
        ],
        "width": 51.93390189518508,
        "height": 270.12335849431827,
        "angle": -126.69308687851189
    },
    {
        "center": [
            732.3125,
            384.5625
        ],
        "width": 12.565767637179551,
        "height": 63.871650982868736,
        "angle": 137.87498327611536
    }
]

export const Ellipses = ({ factor }) => {
    const { ipcam } = useMatrixSlice()
    const { importedPoints } = ipcam

    if ( importedPoints === undefined ) return null

    return (
        <Group>
            {
                uncertainly_ellipses.map((ellipse, index) => {
                    if (importedPoints[index].selected === false ) return null

                    const [x, y] = ellipse.center
                    const width = ellipse.width / (factor * 1.8)
                    const height = ellipse.height / (factor * 1.8)
                    const angle = ellipse.angle
                    return (
                        <KonvaEllipse
                            key={index}
                            x={x / factor}
                            y={y / factor}
                            radiusX={width}
                            radiusY={height}
                            fill='#D2AF7970'
                            stroke='#D2AF79'
                            rotation={angle}
                        />
                )
                })
            }
        </Group>
    );
}